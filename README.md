# cf-automation-pom

### utils/driver_factory.py

| #         | Código                                                                                                                           | Explicación                                                                                                                                                                                                                                                                                                                        |
| --------- | -------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1**     | `from selenium import webdriver`                                                                                                 | Importa el módulo de alto nivel de Selenium que contiene las clases para controlar los diferentes navegadores.                                                                                                                                                                                                                     |
| **2**     | `from selenium.webdriver.chrome.service import Service as ChromeService`                                                         | Importa la clase `Service` específica de Chrome Driver y la renombra como `ChromeService` para mayor legibilidad. Esta clase permite indicarle a Selenium **dónde** y **cómo** lanzar el ejecutable de ChromeDriver.                                                                                                               |
| **3**     | `from webdriver_manager.chrome import ChromeDriverManager`                                                                       | Importa `ChromeDriverManager`, utilitario que descarga automáticamente **la versión compatible** de ChromeDriver y devuelve la ruta a ese ejecutable, evitando configuraciones manuales.                                                                                                                                           |
| **5**     | `def create_driver(headless: bool = False):`                                                                                     | Declara la función `create_driver`. Recibe un parámetro booleano `headless` (por defecto `False`) para decidir si el navegador se ejecutará sin interfaz gráfica.                                                                                                                                                                  |
| **6**     | `options = webdriver.ChromeOptions()`                                                                                            | Crea un objeto `ChromeOptions` donde se irán añadiendo flags de ejecución (p. ej. resolución, modo incógnito, headless, etc.).                                                                                                                                                                                                     |
| **8–9**   | `if headless:`<br>`options.add_argument("--headless=new")`                                                                       | Si el usuario pidió modo *headless*, agrega la flag `--headless=new` (necesaria en Chrome 109+ para el nuevo motor headless).                                                                                                                                                                                                      |
| **11**    | `options.add_argument("--window-size=1920,1080")`                                                                                | Fija el tamaño de la ventana a 1920×1080 px. Así te aseguras de tener siempre el mismo viewport y evitas elementos “fuera de pantalla”.                                                                                                                                                                                            |
| **12**    | `options.add_argument("--incognito")`                                                                                            | Abre Chrome en modo incógnito: sin cookies previas ni caché, útil para aislar escenarios de prueba.                                                                                                                                                                                                                                |
| **14–17** | `driver = webdriver.Chrome(` <br>   `service=ChromeService(ChromeDriverManager().install()),` <br>   `options=options,` <br> `)` | • Llama al constructor de `webdriver.Chrome`.<br>• **`service=`** crea un objeto `ChromeService` apuntando al ejecutable que `ChromeDriverManager().install()` acaba de descargar (o reutilizar si ya existe).<br>• **`options=`** pasa las opciones configuradas arriba. Resultado: se lanza un navegador Chrome listo para usar. |
| **19**    | `driver.implicitly_wait(5)`                                                                                                      | Configura una **espera implícita** de 5 s: cada vez que uses `find_element`, Selenium esperará hasta 5 s antes de lanzar `NoSuchElementException`. Esto ayuda con latencias leves de carga.                                                                                                                                        |
| **20**    | `return driver`                                                                                                                  | Devuelve la instancia de `WebDriver` al llamador (test o fixture).                                                                                                                                                                                                                                                                 |
